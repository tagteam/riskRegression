<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Fast routine to get baseline hazards and subject specific hazards
as well as survival probabilities from a survival::coxph or rms::cph object"><title>Fast computation of survival probabilities, hazards and cumulative hazards from Cox regression models — predictCox • riskRegression</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fast computation of survival probabilities, hazards and cumulative hazards from Cox regression models — predictCox"><meta property="og:description" content="Fast routine to get baseline hazards and subject specific hazards
as well as survival probabilities from a survival::coxph or rms::cph object"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">riskRegression</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2022.05.31</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tagteam/riskRegression/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fast computation of survival probabilities, hazards and cumulative hazards from Cox regression models</h1>
      <small class="dont-index">Source: <a href="https://github.com/tagteam/riskRegression/blob/HEAD/R/predictCox.R" class="external-link"><code>R/predictCox.R</code></a></small>
      <div class="d-none name"><code>predictCox.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fast routine to get baseline hazards and subject specific hazards
as well as survival probabilities from a <code><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">survival::coxph</a></code> or <code><a href="https://rdrr.io/pkg/rms/man/cph.html" class="external-link">rms::cph</a></code> object</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">predictCox</span><span class="op">(</span>
  <span class="va">object</span>,
  <span class="va">times</span>,
  newdata <span class="op">=</span> <span class="cn">NULL</span>,
  centered <span class="op">=</span> <span class="cn">TRUE</span>,
  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cumhazard"</span>, <span class="st">"survival"</span><span class="op">)</span>,
  keep.strata <span class="op">=</span> <span class="cn">TRUE</span>,
  keep.times <span class="op">=</span> <span class="cn">TRUE</span>,
  keep.newdata <span class="op">=</span> <span class="cn">FALSE</span>,
  keep.infoVar <span class="op">=</span> <span class="cn">FALSE</span>,
  se <span class="op">=</span> <span class="cn">FALSE</span>,
  band <span class="op">=</span> <span class="cn">FALSE</span>,
  iid <span class="op">=</span> <span class="cn">FALSE</span>,
  confint <span class="op">=</span> <span class="op">(</span><span class="va">se</span> <span class="op">+</span> <span class="va">band</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span>,
  diag <span class="op">=</span> <span class="cn">FALSE</span>,
  average.iid <span class="op">=</span> <span class="cn">FALSE</span>,
  store.iid <span class="op">=</span> <span class="st">"full"</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>The fitted Cox regression model object either
obtained with <code>coxph</code> (survival package) or <code>cph</code>
(rms package).</p></dd>
<dt>times</dt>
<dd><p>[numeric vector] Time points at which to return
the estimated hazard/cumulative hazard/survival.</p></dd>
<dt>newdata</dt>
<dd><p>[data.frame or data.table]  Contain the values of the predictor variables
defining subject specific predictions.
Should have the same structure as the data set used to fit the <code>object</code>.</p></dd>
<dt>centered</dt>
<dd><p>[logical] If <code>TRUE</code> return prediction at the
mean values of the covariates <code>fit$mean</code>, if <code>FALSE</code>
return a prediction for all covariates equal to zero.  in the
linear predictor. Will be ignored if argument <code>newdata</code> is
used. For internal use.</p></dd>
<dt>type</dt>
<dd><p>[character vector] the type of predicted value. Choices are</p><ul><li><p><code>"hazard"</code> the baseline hazard function when
argument <code>newdata</code> is not used and the hazard function
when argument <code>newdata</code> is used.</p></li>
<li><p><code>"cumhazard"</code>
the cumulative baseline hazard function when argument
<code>newdata</code> is not used and the cumulative hazard function
when argument <code>newdata</code> is used.</p></li>
<li><p><code>"survival"</code>
the survival baseline hazard function when argument
<code>newdata</code> is not used and the cumulative hazard function
when argument <code>newdata</code> is used.</p></li>
</ul><p>Several choices can be
combined in a vector of strings that match (no matter the case)
strings <code>"hazard"</code>,<code>"cumhazard"</code>, <code>"survival"</code>.</p></dd>
<dt>keep.strata</dt>
<dd><p>[logical] If <code>TRUE</code> add the (newdata) strata
to the output. Only if there any.</p></dd>
<dt>keep.times</dt>
<dd><p>[logical] If <code>TRUE</code> add the evaluation times
to the output.</p></dd>
<dt>keep.newdata</dt>
<dd><p>[logical] If <code>TRUE</code> add the value of the
covariates used to make the prediction in the output list.</p></dd>
<dt>keep.infoVar</dt>
<dd><p>[logical] For internal use.</p></dd>
<dt>se</dt>
<dd><p>[logical] If <code>TRUE</code> compute and add the standard errors to the output.</p></dd>
<dt>band</dt>
<dd><p>[logical] If <code>TRUE</code> compute and add the quantiles for the confidence bands to the output.</p></dd>
<dt>iid</dt>
<dd><p>[logical] If <code>TRUE</code> compute and add the influence function to the output.</p></dd>
<dt>confint</dt>
<dd><p>[logical] If <code>TRUE</code> compute and add the confidence intervals/bands to the output.
They are computed applying the <code>confint</code> function to the output.</p></dd>
<dt>diag</dt>
<dd><p>[logical] when <code>FALSE</code> the hazard/cumlative hazard/survival for all observations at all times is computed,
otherwise it is only computed for the i-th observation at the i-th time.</p></dd>
<dt>average.iid</dt>
<dd><p>[logical] If <code>TRUE</code> add the average of the influence function over <code>newdata</code> to the output.</p></dd>
<dt>store.iid</dt>
<dd><p>[character] Implementation used to estimate the influence function and the standard error.
Can be <code>"full"</code> or <code>"minimal"</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When the argument <code>newdata</code> is not specified, the function computes the baseline hazard estimate.
See (Ozenne et al., 2017) section "Handling of tied event times".</p>
<p>Otherwise the function computes survival probabilities with confidence intervals/bands.
See (Ozenne et al., 2017) section "Confidence intervals and confidence bands for survival probabilities".
The survival is computed using the exponential approximation (equation 3).</p>
<p>A detailed explanation about the meaning of the argument <code>store.iid</code> can be found
in (Ozenne et al., 2017) Appendix B "Saving the influence functions".</p>
<p>The function is not compatible with time varying predictor variables.</p>
<p>The centered argument enables us to reproduce the results obtained with the <code>basehaz</code>
function from the survival package but should not be modified by the user.</p>
<p>The iid decomposition is output using an array containing the value of the influence
of each subject used to fit the object (dim 1),
for each subject in newdata (dim 3),
and each time (dim 2).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Brice Ozenne, Anne Lyngholm Sorensen, Thomas Scheike, Christian Torp-Pedersen and Thomas Alexander Gerds.
riskRegression: Predicting the Risk of an Event using Cox Regression Models.
The R Journal (2017) 9:2, pages 440-460.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="confint.predictCox.html">confint.predictCox</a></code> to compute confidence intervals/bands.
<code><a href="autoplot.predictCox.html">autoplot.predictCox</a></code> to display the predictions.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Brice Ozenne broz@sund.ku.dk, Thomas A. Gerds tag@biostat.ku.dk</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#### generate data ####</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span class="r-in"><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="sampleData.html">sampleData</a></span><span class="op">(</span><span class="fl">40</span>,outcome<span class="op">=</span><span class="st">"survival"</span><span class="op">)</span> <span class="co">## training dataset</span></span>
<span class="r-in"><span class="va">nd</span> <span class="op">&lt;-</span> <span class="fu"><a href="sampleData.html">sampleData</a></span><span class="op">(</span><span class="fl">4</span>,outcome<span class="op">=</span><span class="st">"survival"</span><span class="op">)</span> <span class="co">## validation dataset</span></span>
<span class="r-in"><span class="va">d</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">time</span>,<span class="fl">1</span><span class="op">)</span> <span class="co">## create tied events</span></span>
<span class="r-in"><span class="co"># table(duplicated(d$time))</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#### stratified Cox model ####</span></span>
<span class="r-in"><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span><span class="va">X1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">X2</span><span class="op">)</span> <span class="op">+</span> <span class="va">X6</span>,</span>
<span class="r-in">             data<span class="op">=</span><span class="va">d</span>, ties<span class="op">=</span><span class="st">"breslow"</span>, x <span class="op">=</span> <span class="cn">TRUE</span>, y <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## compute the baseline cumulative hazard</span></span>
<span class="r-in"><span class="va">fit.haz</span> <span class="op">&lt;-</span> <span class="fu">predictCox</span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/basehaz.html" class="external-link">basehaz</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span>, <span class="va">fit.haz</span><span class="op">$</span><span class="va">cumhazard</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        hazard time strata fit.haz$cumhazard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.02740075  1.0      0        0.02740075</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.04639643  1.8      0        0.04639643</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.06604836  2.1      0        0.06604836</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.10786058  2.2      0        0.10786058</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.13034065  2.5      0        0.13034065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.15857763  2.7      0        0.15857763</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  0.18834334  3.0      0        0.18834334</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  0.18834334  3.2      0        0.18834334</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  0.22364602  3.5      0        0.22364602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.25999786  3.6      0        0.25999786</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 0.30157505  3.7      0        0.30157505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 0.34570093  4.0      0        0.34570093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 0.39935781  4.7      0        0.39935781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 0.39935781  5.1      0        0.39935781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 0.45630007  5.5      0        0.45630007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 0.51549299  5.8      0        0.51549299</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 0.58000429  5.9      0        0.58000429</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 0.65531323  6.6      0        0.65531323</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 0.73137572  6.9      0        0.73137572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 0.73137572  7.0      0        0.73137572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 0.73137572  7.2      0        0.73137572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 0.83727365  7.7      0        0.83727365</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 1.01024745  8.4      0        1.01024745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 1.01024745  9.2      0        1.01024745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 1.01024745  9.5      0        1.01024745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 1.01024745  9.6      0        1.01024745</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 1.85095070 11.0      0        1.85095070</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 3.88020663 11.1      0        3.88020663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 3.88020663 11.5      0        3.88020663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 8.67043704 12.0      0        8.67043704</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 0.03325983  0.6      1        0.03325983</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 0.15046226  3.6      1        0.15046226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 0.15046226  4.2      1        0.15046226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 0.80091039  4.7      1        0.80091039</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 2.87808974  7.5      1        2.87808974</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## compute individual specific cumulative hazard and survival probabilities </span></span>
<span class="r-in"><span class="va">fit.pred</span> <span class="op">&lt;-</span> <span class="fu">predictCox</span><span class="op">(</span><span class="va">fit</span>, newdata<span class="op">=</span><span class="va">nd</span>, times<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">8</span><span class="op">)</span>, se <span class="op">=</span> <span class="cn">TRUE</span>, band <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">fit.pred</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    observation strata times cumhazard cumhazard.se cumhazard.lower</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           1      1     3    0.3728       0.1390          0.1795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           2      0     3    0.0677       0.0382          0.0224</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           3      0     3    0.1181       0.0541          0.0482</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:           4      0     3    0.2030       0.0750          0.0985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:           1      1     8        NA           NA              NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:           2      0     8    0.3008       0.1401          0.1207</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:           3      0     8    0.5251       0.1885          0.2598</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:           4      0     8    0.9026       0.2504          0.5240</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    cumhazard.upper cumhazard.quantileBand cumhazard.lowerBand</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           0.774                   1.96              0.1797</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           0.205                   2.14              0.0202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           0.290                   2.17              0.0438</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:           0.419                   2.20              0.0900</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:              NA                   1.96                  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:           0.749                   2.14              0.1110</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:           1.061                   2.17              0.2412</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:           1.555                   2.20              0.4899</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    cumhazard.upperBand survival survival.se survival.lower survival.upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:               0.773    0.689      0.0957          0.461          0.836</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:               0.227    0.935      0.0357          0.815          0.978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:               0.318    0.889      0.0480          0.749          0.953</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:               0.458    0.816      0.0612          0.658          0.906</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:                  NA       NA          NA             NA             NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:               0.815    0.740      0.1037          0.473          0.886</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:               1.143    0.592      0.1115          0.346          0.771</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:               1.663    0.406      0.1016          0.211          0.592</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    survival.quantileBand survival.lowerBand survival.upperBand</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                  1.99              0.457              0.837</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:                  2.13              0.798              0.980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:                  2.16              0.728              0.957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:                  2.20              0.633              0.914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:                  1.99                 NA                 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:                  2.13              0.444              0.895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:                  2.16              0.320              0.785</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:                  2.20              0.190              0.612</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">####  other examples ####</span></span>
<span class="r-in"><span class="co"># one strata variable</span></span>
<span class="r-in"><span class="va">fitS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">X1</span><span class="op">)</span><span class="op">+</span><span class="va">X2</span>,</span>
<span class="r-in">              data<span class="op">=</span><span class="va">d</span>, ties<span class="op">=</span><span class="st">"breslow"</span>, x <span class="op">=</span> <span class="cn">TRUE</span>, y <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">predictCox</span><span class="op">(</span><span class="va">fitS</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     observation strata times cumhazard survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:           1      0   0.6    0.0241   0.9762</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:           2      0   1.0    0.0743   0.9284</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:           3      0   1.8    0.1007   0.9042</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:           4      0   2.1    0.1278   0.8800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:           5      0   2.2    0.1836   0.8323</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:           6      0   2.5    0.2140   0.8074</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:           7      0   2.7    0.2454   0.7824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:           8      0   3.0    0.2778   0.7575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:           9      0   3.2    0.2778   0.7575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:          10      0   3.5    0.3124   0.7317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:          11      0   3.6    0.3483   0.7059</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:          12      0   3.7    0.3855   0.6801</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:          13      0   4.0    0.4241   0.6543</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:          14      0   4.2    0.4241   0.6543</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:          15      0   4.7    0.5102   0.6004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:          16      0   5.1    0.5102   0.6004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:          17      0   5.5    0.5611   0.5706</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:          18      0   5.8    0.6148   0.5407</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:          19      0   5.9    0.6716   0.5109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:          20      0   6.6    0.7356   0.4792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:          21      0   6.9    0.8040   0.4475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:          22      0   7.0    0.8040   0.4475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:          23      0   7.2    0.8040   0.4475</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:          24      0   7.5    0.8900   0.4106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:          25      0   7.7    0.9900   0.3716</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:          26      0   8.4    1.1011   0.3325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:          27      0   9.2    1.1011   0.3325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28:          28      0   9.5    1.1011   0.3325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29:          29      0   9.6    1.1011   0.3325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30:          30      0  11.0    1.3511   0.2589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31:          31      0  11.1    1.6845   0.1855</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32:          32      0  11.5    1.6845   0.1855</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33:          33      0  12.0    2.6845   0.0683</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34:          34      1   3.6    0.6161   0.5400</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     observation strata times cumhazard survival</span>
<span class="r-in"><span class="fu">predictCox</span><span class="op">(</span><span class="va">fitS</span>, newdata<span class="op">=</span><span class="va">nd</span>, times <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    observation strata times cumhazard survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           1      0     1    0.1205    0.886</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           2      0     1    0.0743    0.928</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           3      0     1    0.0743    0.928</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:           4      0     1    0.0743    0.928</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># two strata variables</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="va">d</span><span class="op">$</span><span class="va">U</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>,replace<span class="op">=</span><span class="cn">TRUE</span>,size<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">d</span><span class="op">$</span><span class="va">V</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,replace<span class="op">=</span><span class="cn">TRUE</span>,size<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">nd</span><span class="op">$</span><span class="va">U</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>,replace<span class="op">=</span><span class="cn">TRUE</span>,size<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">nd</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">nd</span><span class="op">$</span><span class="va">V</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,replace<span class="op">=</span><span class="cn">TRUE</span>,size<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">nd</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">fit2S</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span><span class="va">X1</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">U</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">V</span><span class="op">)</span><span class="op">+</span><span class="va">X2</span>,</span>
<span class="r-in">              data<span class="op">=</span><span class="va">d</span>, ties<span class="op">=</span><span class="st">"breslow"</span>, x <span class="op">=</span> <span class="cn">TRUE</span>, y <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Loglik converged before variable  1 ; coefficient may be infinite. </span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu">survival</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/basehaz.html" class="external-link">basehaz</a></span><span class="op">(</span><span class="va">fit2S</span><span class="op">)</span>,<span class="fu">predictCox</span><span class="op">(</span><span class="va">fit2S</span>,type<span class="op">=</span><span class="st">"cumhazard"</span><span class="op">)</span><span class="op">$</span><span class="va">cumhazard</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          hazard time strata predictCox(fit2S, type = "cumhazard")$cumhazard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  0.000000e+00  5.9   a, d                                    0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  0.000000e+00  9.2   a, e                                    0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3.333333e-01  1.0   a, g                                    3.333333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  8.333333e-01  2.5   a, g                                    8.333333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  8.333333e-01 11.5   a, g                                    8.333333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  3.333333e-01  0.6   a, h                                    3.333333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  1.333333e+00  2.7   a, h                                    1.333333e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2.500000e-01  4.0   a, i                                    2.500000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  5.833333e-01  4.7   a, i                                    5.833333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 5.833333e-01  9.6   a, i                                    5.833333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 1.000000e+00  4.7   a, j                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 1.000000e+00  3.7   b, d                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 0.000000e+00  7.2   b, f                                    0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 1.000000e+00 12.0   b, f                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 5.000000e-01  2.2   b, g                                    5.000000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 5.000000e-01  5.1   b, g                                    5.000000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 5.000000e-01  6.9   b, h                                    5.000000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 1.500000e+00 11.0   b, h                                    1.500000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 5.000000e-01  2.1   b, i                                    5.000000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 5.000000e-01  3.2   b, i                                    5.000000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 1.000000e+00  6.6   b, j                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 4.573922e-09  3.6   c, e                                    4.573922e-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 1.000000e+00 11.1   c, e                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 5.000000e-01  1.8   c, i                                    5.000000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 5.000000e-01  7.0   c, i                                    5.000000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 0.000000e+00  2.2   d, d                                    0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 0.000000e+00  9.5   d, d                                    0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 1.000000e+00  8.4   d, f                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 1.000000e+00  1.0   d, g                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 2.500000e-01  5.9   d, h                                    2.500000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 5.833333e-01  7.5   d, h                                    5.833333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 1.583333e+00  7.7   d, h                                    1.583333e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 0.000000e+00  4.2   d, j                                    0.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 1.000000e+00  5.8   e, d                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 1.000000e+00  3.0   e, f                                    1.000000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 5.000000e-01  3.5   e, i                                    5.000000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37 1.500000e+00  5.5   e, i                                    1.500000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38 3.333333e-01  2.2   e, j                                    3.333333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39 8.333333e-01  3.6   e, j                                    8.333333e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40 8.333333e-01  9.2   e, j                                    8.333333e-01</span>
<span class="r-in"><span class="fu">predictCox</span><span class="op">(</span><span class="va">fit2S</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     observation strata times cumhazard survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:           1   a, d   5.9  0.00e+00    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:           2   a, e   9.2  0.00e+00    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:           3   a, g   1.0  3.33e-01    0.717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:           4   a, g   2.5  8.33e-01    0.435</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:           5   a, g  11.5  8.33e-01    0.435</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:           6   a, h   0.6  3.33e-01    0.717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:           7   a, h   2.7  1.33e+00    0.264</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:           8   a, i   4.0  2.50e-01    0.779</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:           9   a, i   4.7  5.83e-01    0.558</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:          10   a, i   9.6  5.83e-01    0.558</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:          11   a, j   4.7  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:          12   b, d   3.7  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:          13   b, f   7.2  0.00e+00    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:          14   b, f  12.0  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:          15   b, g   2.2  5.00e-01    0.607</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:          16   b, g   5.1  5.00e-01    0.607</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:          17   b, h   6.9  5.00e-01    0.607</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:          18   b, h  11.0  1.50e+00    0.223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:          19   b, i   2.1  5.00e-01    0.607</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:          20   b, i   3.2  5.00e-01    0.607</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:          21   b, j   6.6  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:          22   c, e   3.6  4.57e-09    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:          23   c, e  11.1  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:          24   c, i   1.8  5.00e-01    0.607</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:          25   c, i   7.0  5.00e-01    0.607</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:          26   d, d   2.2  0.00e+00    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:          27   d, d   9.5  0.00e+00    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28:          28   d, f   8.4  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29:          29   d, g   1.0  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30:          30   d, h   5.9  2.50e-01    0.779</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31:          31   d, h   7.5  5.83e-01    0.558</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32:          32   d, h   7.7  1.58e+00    0.205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33:          33   d, j   4.2  0.00e+00    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34:          34   e, d   5.8  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35:          35   e, f   3.0  1.00e+00    0.368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36:          36   e, i   3.5  5.00e-01    0.607</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37:          37   e, i   5.5  1.50e+00    0.223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38:          38   e, j   2.2  3.33e-01    0.717</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39:          39   e, j   3.6  8.33e-01    0.435</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40:          40   e, j   9.2  8.33e-01    0.435</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     observation strata times cumhazard survival</span>
<span class="r-in"><span class="fu">predictCox</span><span class="op">(</span><span class="va">fitS</span>, newdata<span class="op">=</span><span class="va">nd</span>, times <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    observation strata times cumhazard survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           1      0     3     0.451    0.637</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           2      0     3     0.278    0.757</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           3      0     3     0.278    0.757</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:           4      0     3     0.278    0.757</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># left truncation</span></span>
<span class="r-in"><span class="va">test2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">5</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">7</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">8</span>,<span class="fl">8</span><span class="op">)</span>, </span>
<span class="r-in">              stop<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">6</span>,<span class="fl">7</span>,<span class="fl">8</span>,<span class="fl">9</span>,<span class="fl">9</span>,<span class="fl">9</span>,<span class="fl">14</span>,<span class="fl">17</span><span class="op">)</span>, </span>
<span class="r-in">              event<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>, </span>
<span class="r-in">              x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> </span>
<span class="r-in"><span class="va">m.cph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">start</span>, <span class="va">stop</span>, <span class="va">event</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>, <span class="va">test2</span>, x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="fu">predictCox</span><span class="op">(</span><span class="va">m.cph</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The current version of predictCox was not designed to handle left censoring </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> The function may be used on own risks </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    observation times cumhazard  survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:           1     2 0.5000000 0.6065307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           2     3 0.8333333 0.4345982</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:           3     6 1.0333333 0.3558189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:           4     7 1.2833333 0.2771121</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:           5     8 1.5333333 0.2158151</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:           6     9 1.9833333 0.1376098</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:           7    14 1.9833333 0.1376098</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:           8    17 1.9833333 0.1376098</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/pkg/survival/man/basehaz.html" class="external-link">basehaz</a></span><span class="op">(</span><span class="va">m.cph</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      hazard time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.5000000    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.8333333    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1.0333333    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1.2833333    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 1.5333333    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1.9833333    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 1.9833333   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 1.9833333   17</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Thomas Alexander Gerds, Johan Sebastian Ohlendorff, Brice Ozenne.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

