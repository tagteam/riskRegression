<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Plot Calibration curves for risk prediction models"><title>Plot Calibration curve — plotCalibration • riskRegression</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot Calibration curve — plotCalibration"><meta property="og:description" content="Plot Calibration curves for risk prediction models"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">riskRegression</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2022.10.28</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/IFAUC.html">Derivation of the Influence Function for AUC for competing risk data and survival data</a>
    <a class="dropdown-item" href="../articles/IFBrier.html">Influence function calculation for Brier score for event time data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tagteam/riskRegression/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Plot Calibration curve</h1>
      <small class="dont-index">Source: <a href="https://github.com/tagteam/riskRegression/blob/HEAD/R/plotCalibration.R" class="external-link"><code>R/plotCalibration.R</code></a></small>
      <div class="d-none name"><code>plotCalibration.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plot Calibration curves for risk prediction models</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plotCalibration</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">models</span>,</span>
<span>  <span class="va">times</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"nne"</span>,</span>
<span>  <span class="va">cens.method</span>,</span>
<span>  round <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bandwidth <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  q <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  bars <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  hanging <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names <span class="op">=</span> <span class="st">"quantiles"</span>,</span>
<span>  pseudo <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">rug</span>,</span>
<span>  show.frequencies <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  diag <span class="op">=</span> <span class="op">!</span><span class="va">add</span>,</span>
<span>  legend <span class="op">=</span> <span class="op">!</span><span class="va">add</span>,</span>
<span>  <span class="va">auc.in.legend</span>,</span>
<span>  <span class="va">brier.in.legend</span>,</span>
<span>  axes <span class="op">=</span> <span class="op">!</span><span class="va">add</span>,</span>
<span>  xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  xlab <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">bars</span>, <span class="st">"Risk groups"</span>, <span class="st">"Predicted risk"</span><span class="op">)</span>,</span>
<span>  <span class="va">ylab</span>,</span>
<span>  <span class="va">col</span>,</span>
<span>  <span class="va">lwd</span>,</span>
<span>  <span class="va">lty</span>,</span>
<span>  <span class="va">pch</span>,</span>
<span>  <span class="va">type</span>,</span>
<span>  percent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na.action <span class="op">=</span> <span class="va">na.fail</span>,</span>
<span>  cex <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>Object obtained with function <code>Score</code></p></dd>


<dt>models</dt>
<dd><p>Choice of models to plot</p></dd>


<dt>times</dt>
<dd><p>Time point specifying the prediction horizon.</p></dd>


<dt>method</dt>
<dd><p>The method for estimating the calibration curve(s):</p><ul><li><p><code>"quantile"</code>The observed proportion at predicted risk value 'p'
is obtained in groups
defined by quantiles of the predicted event probabilities of all subjects.
The number of groups is controlled by argument <code>q</code>.</p></li>
<li><p><code>"nne"</code>: The observed proportion at predicted risk value 'p' is obtained based
on the subjects whose predicted risk is inside a nearest
neighborhood around the value 'p'. The larger the
bandwidth the more subjects are included in the current neighborhood.</p></li>
</ul></dd>


<dt>cens.method</dt>
<dd><p>For right censored data only. How observed proportions are calculated. Either <code>"jackknife"</code> or <code>"local"</code>:</p><ul><li><p><code>"jackknife"</code>Compute a running mean of the jackknife pseudovalues across neighborhoods/groups of the predicted risks.
Here we rely on the
assumption that censoring is independent of the event time and the covariates, see References.</p></li>
<li><p><code>"local"</code>Compute the Kaplan-Meier estimator in absence of competing risks and the Aalen-Johansen estimator in presence of competing risks
locally like a running mean in neighborhoods of the predicted risks. The widths of the neighborhoods
are defined according to method.</p></li>
</ul></dd>


<dt>round</dt>
<dd><p>If <code>TRUE</code> predicted probabilities are rounded to
two digits before smoothing. This may have a considerable
effect on computing efficiency in large data sets.</p></dd>


<dt>bandwidth</dt>
<dd><p>The bandwidth for <code>method="nne"</code></p></dd>


<dt>q</dt>
<dd><p>The number of quantiles for <code>method="quantile"</code> and
<code>bars=TRUE</code>.</p></dd>


<dt>bars</dt>
<dd><p>If <code>TRUE</code>, use barplots to show calibration.</p></dd>


<dt>hanging</dt>
<dd><p>Barplots only. If <code>TRUE</code>, hang bars
corresponding to observed frequencies (estimated actual risk)  at the value of the
corresponding prediction.</p></dd>


<dt>names</dt>
<dd><p>Barplots only. Names argument passed to
<code>names.arg</code> of <code>barplot</code>.</p></dd>


<dt>pseudo</dt>
<dd><p>If <code>TRUE</code> show pseudo values (only for right
censored data).</p></dd>


<dt>rug</dt>
<dd><p>If <code>TRUE</code> show rug plot at the predictions</p></dd>


<dt>show.frequencies</dt>
<dd><p>Barplots only. If <code>TRUE</code>, show
frequencies above the bars.</p></dd>


<dt>plot</dt>
<dd><p>If <code>FALSE</code>, do not plot the results, just return
a plottable object.</p></dd>


<dt>add</dt>
<dd><p>If <code>TRUE</code> the line(s) are added to an existing
plot.</p></dd>


<dt>diag</dt>
<dd><p>If <code>FALSE</code> no diagonal line is drawn.</p></dd>


<dt>legend</dt>
<dd><p>Logical. If <code>TRUE</code> draw legend.</p></dd>


<dt>auc.in.legend</dt>
<dd><p>Logical. If <code>TRUE</code> add AUC to legend.</p></dd>


<dt>brier.in.legend</dt>
<dd><p>Logical. If <code>TRUE</code> add Brier score to
legend.</p></dd>


<dt>axes</dt>
<dd><p>If <code>FALSE</code> no axes are drawn.</p></dd>


<dt>xlim</dt>
<dd><p>Limits of x-axis.</p></dd>


<dt>ylim</dt>
<dd><p>Limits of y-axis.</p></dd>


<dt>xlab</dt>
<dd><p>Label for y-axis.</p></dd>


<dt>ylab</dt>
<dd><p>Label for x-axis.</p></dd>


<dt>col</dt>
<dd><p>Vector with colors, one for each element of
object. Passed to <code><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></code>.</p></dd>


<dt>lwd</dt>
<dd><p>Vector with line widths, one for each element of
object. Passed to <code><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></code>.</p></dd>


<dt>lty</dt>
<dd><p>lwd Vector with line style, one for each element of
object.  Passed to <code><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></code>.</p></dd>


<dt>pch</dt>
<dd><p>Passed to <code><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></code>.</p></dd>


<dt>type</dt>
<dd><p>Passed to <code><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></code>.</p></dd>


<dt>percent</dt>
<dd><p>If TRUE axes labels are multiplied by 100 and thus
interpretable on a percent scale.</p></dd>


<dt>na.action</dt>
<dd><p>what to do with NA values. Passed to
<code><a href="https://rdrr.io/r/stats/model.frame.html" class="external-link">model.frame</a></code></p></dd>


<dt>cex</dt>
<dd><p>Default cex used for legend and labels.</p></dd>


<dt>...</dt>
<dd><p>Used to control the subroutines: plot, axis, lines,
barplot, legend, addtable2plot, points (pseudo values), rug. See
<code><a href="https://rdrr.io/pkg/prodlim/man/SmartControl.html" class="external-link">SmartControl</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In uncensored data, the observed frequency of the outcome event is calculated locally at the predicted risk.
In right censored data with and without competing risks, the actual risk
is calculated using the Kaplan-Meier and the Aalen-Johansen method, respectively,
locally at the predicted risk.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">prodlim</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># binary</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">db</span><span class="op">=</span><span class="fu"><a href="sampleData.html">sampleData</a></span><span class="op">(</span><span class="fl">100</span>,outcome<span class="op">=</span><span class="st">"binary"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fb1</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">Y</span><span class="op">~</span><span class="va">X1</span><span class="op">+</span><span class="va">X5</span><span class="op">+</span><span class="va">X7</span>,data<span class="op">=</span><span class="va">db</span>,family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fb2</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">Y</span><span class="op">~</span><span class="va">X1</span><span class="op">+</span><span class="va">X3</span><span class="op">+</span><span class="va">X6</span><span class="op">+</span><span class="va">X7</span>,data<span class="op">=</span><span class="va">db</span>,family<span class="op">=</span><span class="st">"binomial"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xb</span><span class="op">=</span><span class="fu"><a href="Score.html">Score</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>model1<span class="op">=</span><span class="va">fb1</span>,model2<span class="op">=</span><span class="va">fb2</span><span class="op">)</span>,<span class="va">Y</span><span class="op">~</span><span class="fl">1</span>,data<span class="op">=</span><span class="va">db</span>,</span></span>
<span class="r-in"><span>          plots<span class="op">=</span><span class="st">"cal"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotCalibration</span><span class="op">(</span><span class="va">xb</span>,brier.in.legend<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotCalibration-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">plotCalibration</span><span class="op">(</span><span class="va">xb</span>,bars<span class="op">=</span><span class="cn">TRUE</span>,model<span class="op">=</span><span class="st">"model1"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotCalibration-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">plotCalibration</span><span class="op">(</span><span class="va">xb</span>,models<span class="op">=</span><span class="fl">1</span>,bars<span class="op">=</span><span class="cn">TRUE</span>,names.cex<span class="op">=</span><span class="fl">1.3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotCalibration-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># survival</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">prodlim</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dslearn</span><span class="op">=</span><span class="fu"><a href="sampleData.html">sampleData</a></span><span class="op">(</span><span class="fl">56</span>,outcome<span class="op">=</span><span class="st">"survival"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dstest</span><span class="op">=</span><span class="fu"><a href="sampleData.html">sampleData</a></span><span class="op">(</span><span class="fl">100</span>,outcome<span class="op">=</span><span class="st">"survival"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fs1</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span><span class="va">X1</span><span class="op">+</span><span class="va">X5</span><span class="op">+</span><span class="va">X7</span>,data<span class="op">=</span><span class="va">dslearn</span>,x<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fs2</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">X1</span><span class="op">)</span><span class="op">+</span><span class="va">X3</span><span class="op">+</span><span class="va">X6</span><span class="op">+</span><span class="va">X7</span>,data<span class="op">=</span><span class="va">dslearn</span>,x<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xs</span><span class="op">=</span><span class="fu"><a href="Score.html">Score</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Cox1<span class="op">=</span><span class="va">fs1</span>,Cox2<span class="op">=</span><span class="va">fs2</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span><span class="fl">1</span>,data<span class="op">=</span><span class="va">dstest</span>,</span></span>
<span class="r-in"><span>          plots<span class="op">=</span><span class="st">"cal"</span>,metrics<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotCalibration</span><span class="op">(</span><span class="va">xs</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The default method for estimating calibration curves based on censored data has changed for riskRegression version 2019-9-8 or higher</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Set cens.method="jackknife" to get the estimate using pseudo-values.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> However, note that the option "jackknife" is sensititve to violations of the assumption that the censoring is independent of both the event times and the covariates.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Set cens.method="local" to suppress this message.</span>
<span class="r-plt img"><img src="plotCalibration-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">plotCalibration</span><span class="op">(</span><span class="va">xs</span>,cens.method<span class="op">=</span><span class="st">"local"</span>,pseudo<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plotCalibration-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">plotCalibration</span><span class="op">(</span><span class="va">xs</span>,method<span class="op">=</span><span class="st">"quantile"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The default method for estimating calibration curves based on censored data has changed for riskRegression version 2019-9-8 or higher</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Set cens.method="jackknife" to get the estimate using pseudo-values.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> However, note that the option "jackknife" is sensititve to violations of the assumption that the censoring is independent of both the event times and the covariates.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Set cens.method="local" to suppress this message.</span>
<span class="r-plt img"><img src="plotCalibration-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># competing risks</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Melanoma</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="CSC.html">CSC</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/prodlim/man/Hist.html" class="external-link">Hist</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">age</span><span class="op">+</span><span class="va">sex</span><span class="op">+</span><span class="va">epicel</span><span class="op">+</span><span class="va">ulcer</span>,data<span class="op">=</span><span class="va">Melanoma</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="CSC.html">CSC</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/prodlim/man/Hist.html" class="external-link">Hist</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="va">age</span><span class="op">+</span><span class="va">sex</span><span class="op">+</span><span class="va">logthick</span><span class="op">+</span><span class="va">epicel</span><span class="op">+</span><span class="va">ulcer</span>,data<span class="op">=</span><span class="va">Melanoma</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="Score.html">Score</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>model1<span class="op">=</span><span class="va">f1</span>,model2<span class="op">=</span><span class="va">f2</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/pkg/prodlim/man/Hist.html" class="external-link">Hist</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">status</span><span class="op">)</span><span class="op">~</span><span class="fl">1</span>,data<span class="op">=</span><span class="va">Melanoma</span>,</span></span>
<span class="r-in"><span>           cause<span class="op">=</span> <span class="fl">2</span>,times<span class="op">=</span><span class="fl">5</span><span class="op">*</span><span class="fl">365.25</span>,plots<span class="op">=</span><span class="st">"cal"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">plotCalibration</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Thomas Alexander Gerds, Johan Sebastian Ohlendorff, Brice Ozenne.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

