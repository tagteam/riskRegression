<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Apply formula to combine two or more Cox models into absolute risk (cumulative incidence function)."><title>Predicting Absolute Risk from Cause-Specific Cox Models — predict.CauseSpecificCox • riskRegression</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predicting Absolute Risk from Cause-Specific Cox Models — predict.CauseSpecificCox"><meta property="og:description" content="Apply formula to combine two or more Cox models into absolute risk (cumulative incidence function)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">riskRegression</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2022.03.09</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tagteam/riskRegression/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Predicting Absolute Risk from Cause-Specific Cox Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/tagteam/riskRegression/blob/HEAD/R/predict.CauseSpecificCox.R" class="external-link"><code>R/predict.CauseSpecificCox.R</code></a></small>
      <div class="d-none name"><code>predict.CauseSpecificCox.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Apply formula to combine two or more Cox models into absolute risk (cumulative incidence function).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S3 method for CauseSpecificCox</span>
<span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span>
  <span class="va">object</span>,
  <span class="va">newdata</span>,
  <span class="va">times</span>,
  <span class="va">cause</span>,
  type <span class="op">=</span> <span class="st">"absRisk"</span>,
  landmark <span class="op">=</span> <span class="cn">NA</span>,
  keep.times <span class="op">=</span> <span class="fl">1L</span>,
  keep.newdata <span class="op">=</span> <span class="fl">1L</span>,
  keep.strata <span class="op">=</span> <span class="fl">1L</span>,
  se <span class="op">=</span> <span class="cn">FALSE</span>,
  band <span class="op">=</span> <span class="cn">FALSE</span>,
  iid <span class="op">=</span> <span class="cn">FALSE</span>,
  confint <span class="op">=</span> <span class="op">(</span><span class="va">se</span> <span class="op">+</span> <span class="va">band</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span>,
  average.iid <span class="op">=</span> <span class="cn">FALSE</span>,
  product.limit <span class="op">=</span> <span class="cn">TRUE</span>,
  store.iid <span class="op">=</span> <span class="st">"full"</span>,
  diag <span class="op">=</span> <span class="cn">FALSE</span>,
  max.time <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>The fitted cause specific Cox model</p></dd>
<dt>newdata</dt>
<dd><p>[data.frame or data.table]  Contain the values of the predictor variables
defining subject specific predictions relative to each cause.
Should have the same structure as the data set used to fit the <code>object</code>.</p></dd>
<dt>times</dt>
<dd><p>[numeric vector] Time points at which to return
the estimated absolute risk.</p></dd>
<dt>cause</dt>
<dd><p>[integer/character] Identifies the cause of interest among the competing
events.</p></dd>
<dt>type</dt>
<dd><p>[character] Can be changed to <code>"survival"</code> if the event free survival should be output instead of the absolute risk.</p></dd>
<dt>landmark</dt>
<dd><p>[integer] The starting time for the computation of the cumulative risk.</p></dd>
<dt>keep.times</dt>
<dd><p>[logical] If <code>TRUE</code> add the evaluation times to the output.</p></dd>
<dt>keep.newdata</dt>
<dd><p>[logical] If <code>TRUE</code> add the value of the covariates used to make the prediction in the output list.</p></dd>
<dt>keep.strata</dt>
<dd><p>[logical] If <code>TRUE</code> add the value of the strata used to make the prediction in the output list.</p></dd>
<dt>se</dt>
<dd><p>[logical] If <code>TRUE</code> compute and add the standard errors to the output.</p></dd>
<dt>band</dt>
<dd><p>[logical] If <code>TRUE</code> compute and add the quantiles for the confidence bands to the output.</p></dd>
<dt>iid</dt>
<dd><p>[logical] If <code>TRUE</code> compute and add the influence function to the output.</p></dd>
<dt>confint</dt>
<dd><p>[logical] If <code>TRUE</code> compute and add the confidence intervals/bands to the output.
They are computed applying the <code>confint</code> function to the output.</p></dd>
<dt>average.iid</dt>
<dd><p>[logical]. If <code>TRUE</code> add the average of the influence function over <code>newdata</code> to the output.</p></dd>
<dt>product.limit</dt>
<dd><p>[logical]. If <code>TRUE</code> the survival is computed using the product limit estimator.
Otherwise the exponential approximation is used (i.e. exp(-cumulative hazard)).</p></dd>
<dt>store.iid</dt>
<dd><p>[character] Implementation used to estimate the influence function and the standard error.
Can be <code>"full"</code> or <code>"minimal"</code>.</p></dd>
<dt>diag</dt>
<dd><p>[logical] when <code>FALSE</code> the absolute risk/survival for all observations at all times is computed,
otherwise it is only computed for the i-th observation at the i-th time.</p></dd>
<dt>max.time</dt>
<dd><p>[numeric] maximum time of the response of the fitted data.  Only relevant if
model <code>response</code> element has been removed</p></dd>
<dt>...</dt>
<dd><p>not used.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function computes the absolute risk as given by formula 2 of (Ozenne et al., 2017).
Confidence intervals and confidence bands can be computed using a first order von Mises expansion.
See the section "Construction of the confidence intervals" in (Ozenne et al., 2017).</p>
<p>A detailed explanation about the meaning of the argument <code>store.iid</code> can be found
in (Ozenne et al., 2017) Appendix B "Saving the influence functions".</p>
<p>Note: for Cox regression models with time varying
    covariates it does not make sense to use this function, because
    the predicted risk has to be a measurable function of the data
    available at the time origin.</p>
<p>The iid decomposition is output using an array containing the value of the influence
of each subject used to fit the object (dim 1),
for each subject in newdata (dim 3),
and each time (dim 2).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Brice Ozenne, Anne Lyngholm Sorensen, Thomas Scheike, Christian Torp-Pedersen and Thomas Alexander Gerds.
riskRegression: Predicting the Risk of an Event using Cox Regression Models.
The R Journal (2017) 9:2, pages 440-460.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="confint.predictCSC.html">confint.predictCSC</a></code> to compute confidence intervals/bands.
<code><a href="autoplot.predictCSC.html">autoplot.predictCSC</a></code> to display the predictions.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Brice Ozenne broz@sund.ku.dk, Thomas A. Gerds
    tag@biostat.ku.dk</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">prodlim</span><span class="op">)</span></span>
<span class="r-in"><span class="co">#### generate data ####</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span class="r-in"><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="sampleData.html">sampleData</a></span><span class="op">(</span><span class="fl">80</span>,outcome<span class="op">=</span><span class="st">"comp"</span><span class="op">)</span> <span class="co">## training dataset</span></span>
<span class="r-in"><span class="va">nd</span> <span class="op">&lt;-</span> <span class="fu"><a href="sampleData.html">sampleData</a></span><span class="op">(</span><span class="fl">4</span>,outcome<span class="op">=</span><span class="st">"comp"</span><span class="op">)</span> <span class="co">## validation dataset</span></span>
<span class="r-in"><span class="va">d</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">time</span>,<span class="fl">1</span><span class="op">)</span> <span class="co">## create tied events</span></span>
<span class="r-in"><span class="va">ttt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/duplicated.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">time</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## estimate a CSC model based on the coxph function</span></span>
<span class="r-in"><span class="va">CSC.fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="CSC.html">CSC</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/prodlim/man/Hist.html" class="external-link">Hist</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span> <span class="va">X3</span><span class="op">+</span><span class="va">X8</span>, data<span class="op">=</span><span class="va">d</span>, method <span class="op">=</span> <span class="st">"breslow"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## compute the absolute risk of cause 1, in the validation dataset</span></span>
<span class="r-in"><span class="co">## at time 1:10</span></span>
<span class="r-in"><span class="va">CSC.risk</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">CSC.fit</span>, newdata<span class="op">=</span><span class="va">nd</span>, times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, cause<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="va">CSC.risk</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     observation X3      X8 times absRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:           1  1 -1.5612     1  0.0969</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:           2  1 -0.7577     1  0.0948</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:           3  0  1.5421     1  0.0810</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:           4  0 -0.0647     1  0.0847</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:           1  1 -1.5612     2  0.2667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:           2  1 -0.7577     2  0.2617</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:           3  0  1.5421     2  0.2270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:           4  0 -0.0647     2  0.2359</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:           1  1 -1.5612     3  0.3574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:           2  1 -0.7577     3  0.3520</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:           3  0  1.5421     3  0.3085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:           4  0 -0.0647     3  0.3186</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:           1  1 -1.5612     4  0.4220</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:           2  1 -0.7577     4  0.4172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:           3  0  1.5421     4  0.3689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:           4  0 -0.0647     4  0.3784</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:           1  1 -1.5612     5  0.4572</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:           2  1 -0.7577     5  0.4535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:           3  0  1.5421     5  0.4036</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:           4  0 -0.0647     5  0.4113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:           1  1 -1.5612     6  0.4765</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:           2  1 -0.7577     6  0.4738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:           3  0  1.5421     6  0.4235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:           4  0 -0.0647     6  0.4295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:           1  1 -1.5612     7  0.5401</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:           2  1 -0.7577     7  0.5428</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:           3  0  1.5421     7  0.4934</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28:           4  0 -0.0647     7  0.4903</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29:           1  1 -1.5612     8  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30:           2  1 -0.7577     8  0.5671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31:           3  0  1.5421     8  0.5185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32:           4  0 -0.0647     8  0.5120</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33:           1  1 -1.5612     9  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34:           2  1 -0.7577     9  0.5671</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35:           3  0  1.5421     9  0.5185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36:           4  0 -0.0647     9  0.5120</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37:           1  1 -1.5612    10  0.5967</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38:           2  1 -0.7577    10  0.6073</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39:           3  0  1.5421    10  0.5629</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40:           4  0 -0.0647    10  0.5456</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     observation X3      X8 times absRisk</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## compute absolute risks with CI for cause 2</span></span>
<span class="r-in"><span class="co">## (without displaying the value of the covariates)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">CSC.fit</span>,newdata<span class="op">=</span><span class="va">nd</span>,times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,cause<span class="op">=</span><span class="fl">2</span>,se<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span class="r-in">        keep.newdata <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     observation times absRisk absRisk.se absRisk.lower absRisk.upper</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:           1     1 0.00000     0.0000      0.000000        0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:           2     1 0.00000     0.0000      0.000000        0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:           3     1 0.00000     0.0000      0.000000        0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:           4     1 0.00000     0.0000      0.000000        0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:           1     2 0.01409     0.0155      0.000855        0.0764</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:           2     2 0.01107     0.0113      0.000904        0.0554</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:           3     2 0.00907     0.0111      0.000397        0.0593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:           4     2 0.01470     0.0153      0.001073        0.0739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:           1     3 0.06024     0.0455      0.008579        0.1904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:           2     3 0.04785     0.0258      0.013482        0.1170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:           3     3 0.04038     0.0297      0.006543        0.1290</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:           4     3 0.06422     0.0379      0.015235        0.1651</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:           1     4 0.06024     0.0455      0.008579        0.1904</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:           2     4 0.04785     0.0258      0.013482        0.1170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:           3     4 0.04038     0.0297      0.006543        0.1290</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:           4     4 0.06422     0.0379      0.015235        0.1651</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:           1     5 0.14687     0.0920      0.026324        0.3636</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:           2     5 0.11898     0.0639      0.030524        0.2729</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:           3     5 0.10403     0.0816      0.011531        0.3174</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:           4     5 0.15961     0.0563      0.068873        0.2841</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21:           1     6 0.18485     0.1198      0.027826        0.4513</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22:           2     6 0.15128     0.0838      0.034903        0.3454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23:           3     6 0.13399     0.0953      0.017909        0.3663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24:           4     6 0.20173     0.0599      0.100005        0.3286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25:           1     7 0.18485     0.1198      0.027826        0.4513</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26:           2     7 0.15128     0.0838      0.034903        0.3454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27:           3     7 0.13399     0.0953      0.017909        0.3663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28:           4     7 0.20173     0.0599      0.100005        0.3286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29:           1     8 0.20546     0.1285      0.032271        0.4822</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30:           2     8 0.16927     0.0915      0.039727        0.3760</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31:           3     8 0.15172     0.1087      0.018870        0.4083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32:           4     8 0.22556     0.0641      0.114794        0.3590</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33:           1     9 0.25516     0.1524      0.040038        0.5600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34:           2     9 0.21404     0.1110      0.050731        0.4506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35:           3     9 0.19687     0.1332      0.025363        0.4873</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36:           4     9 0.28284     0.0732      0.151571        0.4294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37:           1    10 0.25516     0.1524      0.040038        0.5600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38:           2    10 0.21404     0.1110      0.050731        0.4506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39:           3    10 0.19687     0.1332      0.025363        0.4873</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40:           4    10 0.28284     0.0732      0.151571        0.4294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     observation times absRisk absRisk.se absRisk.lower absRisk.upper</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## other example</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">CSC.fit.s</span> <span class="op">&lt;-</span> <span class="fu"><a href="CSC.html">CSC</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/prodlim/man/Hist.html" class="external-link">Hist</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">X1</span><span class="op">)</span><span class="op">+</span><span class="va">X2</span><span class="op">+</span><span class="va">X9</span>,</span>
<span class="r-in"> <span class="fu"><a href="https://rdrr.io/pkg/prodlim/man/Hist.html" class="external-link">Hist</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span> <span class="va">X2</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">X4</span><span class="op">)</span><span class="op">+</span><span class="va">X8</span><span class="op">+</span><span class="va">X7</span><span class="op">)</span>,data<span class="op">=</span><span class="va">d</span>, method <span class="op">=</span> <span class="st">"breslow"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">CSC.fit.s</span>,cause<span class="op">=</span><span class="fl">1</span>,times<span class="op">=</span><span class="va">ttt</span>,se<span class="op">=</span><span class="fl">1L</span><span class="op">)</span> <span class="co">## note: absRisk&gt;1 due to small number of observations</span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(object$call$data):</span> object 'd' not found</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## using the cph function instead of coxph</span></span>
<span class="r-in"><span class="va">CSC.cph</span> <span class="op">&lt;-</span> <span class="fu"><a href="CSC.html">CSC</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/prodlim/man/Hist.html" class="external-link">Hist</a></span><span class="op">(</span><span class="va">time</span>,<span class="va">event</span><span class="op">)</span><span class="op">~</span> <span class="va">X1</span><span class="op">+</span><span class="va">X2</span>,data<span class="op">=</span><span class="va">d</span>, method <span class="op">=</span> <span class="st">"breslow"</span>, fitter <span class="op">=</span> <span class="st">"cph"</span><span class="op">)</span><span class="co">#' </span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">CSC.cph</span>, newdata <span class="op">=</span> <span class="va">d</span>, cause <span class="op">=</span> <span class="fl">2</span>, times <span class="op">=</span> <span class="va">ttt</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      observation X1 X2 times absRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:           1  0  0   0.6   0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:           2  0  0   0.6   0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:           3  0  0   0.6   0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:           4  0  0   0.6   0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:           5  0  1   0.6   0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 796:          76  0  0  11.8   0.499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 797:          77  0  0  11.8   0.499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 798:          78  0  0  11.8   0.499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 799:          79  0  1  11.8   0.340</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 800:          80  1  0  11.8   0.242</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## landmark analysis</span></span>
<span class="r-in"><span class="va">T0</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span class="r-in"><span class="va">predCSC.afterT0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">CSC.fit</span>, newdata <span class="op">=</span> <span class="va">d</span>, cause <span class="op">=</span> <span class="fl">2</span>, times <span class="op">=</span> <span class="va">ttt</span><span class="op">[</span><span class="va">ttt</span><span class="op">&gt;</span><span class="va">T0</span><span class="op">]</span>, landmark <span class="op">=</span> <span class="va">T0</span><span class="op">)</span></span>
<span class="r-in"><span class="va">predCSC.afterT0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      observation X3       X8 times absRisk</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:           1  0 -0.39410   2.9  0.0761</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:           2  1 -1.51024   2.9  0.0647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:           3  1  0.00599   2.9  0.0417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:           4  0  0.85501   2.9  0.0530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:           5  0  0.72985   2.9  0.0550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 636:          76  1  0.36861  11.8  0.3184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 637:          77  0  0.64851  11.8  0.4514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 638:          78  1 -0.43983  11.8  0.3727</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 639:          79  1 -0.86642  11.8  0.4022</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 640:          80  0  0.86530  11.8  0.4346</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Thomas Alexander Gerds, Johan Sebastian Ohlendorff, Brice Ozenne.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

